### Session 

随着web的发展，http变的越来越流行，但是http的设计却是无状态的，在于当时的设计是合理的，但是业务的发展却是需要这个状态进行
管理，例如用户是否登录，用户的购物车，用户是否能删除自己的帖子等等。于是网景公司推出了 `cookie` ， 用来标示用户，后续的请求
浏览器会自动带上这个cookie以方便服务器进行校验。


#### session 用来干什么

谈论一个东西可以干什么，总不能脱离他的背景的，http是无状态的，业务需求是需要状态的，所以需要一个可以标示用户的信息，他可以叫
session，也能叫zession，只要能标示用户就行了。而session只是一个会话的概念，就相当于 `java` 中的接口，具体的实现可以
有很多种，其中最为有名的就是 `cookie` 了，当然也有 url 重写，隐藏表单。


#### tomcat session

单点的情况下，我们可以使用tomcat自带的session就可以实现了用户是否登录的标志了，具体的实现原理就是用户登录的时候添加一个cookie，
cookie的名字----> `JSESSION` `JSESSIONID` (熟悉不).返回给客户端。后续的请求需要客户端携带这个cookie

伪代码(以登录举例)如下

```text
    1、获取客户端请求的cookie并校验
    2、没有且不是登录页，跳转去登录吧
    3、有cookie，跳过去执行业务
```

> 具体的 session 实现参考 `SessionManager` 类

#### 分布式Session

分布式和单点的区别

单点直接将session存储在本机内存中，属于进程内通信，存取都是内存，存在单点问题，但是方便实现
分布式将session存储在缓存数据库(redis/memcache)中，属于进程外通信，不存在单点问题，实现需要自研，自写cookie

实现上的区别

都需要解析客户端的cookie，获取cookie信息，需要校验session的合法性

单点
1、获取HttpSession的时候，tomcat是直接内存中取

分布式
1、需要去缓存中取